<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des Commandes</title>
    <link rel="stylesheet" href="/node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/admin-styles.css">
</head>
<body>
<% include('../partials/header') %>
<main class="container my-5">
    <section>
        <h2>Gestion des Commandes</h2>
        <ul class="list-group">
            <% orders.forEach(order => { %>
                <li class="list-group-item">
                    <div class="d-flex justify-content-between align-items-center">
                        <span>Commande #<%= order._id %> - Total: €<%= order.total %> - Statut: <%= order.statut %> - Utilisateur: <%= order.utilisateur_id.nom %></span>
                        <form action="/admin/orders/update" method="post" class="d-inline">
                            <input type="hidden" name="id" value="<%= order._id %>">
                            <select name="statut" class="form-select d-inline-block me-2" style="width: auto;">
                                <option value="En attente" <%= order.statut === 'En attente' ? 'selected' : '' %>>En attente</option>
                                <option value="Traitée" <%= order.statut === 'Traitée' ? 'selected' : '' %>>Traitée</option>
                                <option value="Expédiée" <%= order.statut === 'Expédiée' ? 'selected' : '' %>>Expédiée</option>
                                <option value="Livrée" <%= order.statut === 'Livrée' ? 'selected' : '' %>>Livrée</option>
                            </select>
                            <button type="submit" class="btn btn-secondary">Mettre à jour</button>
                        </form>
                    </div>
                </li>
            <% }); %>
        </ul>
    </section>
</main>
<% include('../partials/footer') %>
<script src="/node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

